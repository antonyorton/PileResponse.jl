<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial · PileResponse.jl documentation</title><meta name="title" content="Tutorial · PileResponse.jl documentation"/><meta property="og:title" content="Tutorial · PileResponse.jl documentation"/><meta property="twitter:title" content="Tutorial · PileResponse.jl documentation"/><meta name="description" content="Documentation for PileResponse.jl documentation."/><meta property="og:description" content="Documentation for PileResponse.jl documentation."/><meta property="twitter:description" content="Documentation for PileResponse.jl documentation."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PileResponse.jl documentation</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Tutorial</a><ul class="internal"><li><a class="tocitem" href="#CPT-data"><span>CPT data</span></a></li><li><a class="tocitem" href="#Soil-properties-and-depth-to-groundwater"><span>Soil properties and depth to groundwater</span></a></li><li><a class="tocitem" href="#Derive-I_{c},-V_{s}-and-E_{0}"><span>Derive <span>$I_{c}$</span>, <span>$V_{s}$</span> and <span>$E_{0}$</span></span></a></li><li><a class="tocitem" href="#Pile-load-test-details"><span>Pile load test details</span></a></li><li><a class="tocitem" href="#Pile-ultimate-load-assessment"><span>Pile ultimate load assessment</span></a></li><li><a class="tocitem" href="#Pile-load-displacement-response"><span>Pile load displacement response</span></a></li><li><a class="tocitem" href="#Load-carried-by-pile-shaft-at-capacity"><span>Load carried by pile shaft at capacity</span></a></li><li><a class="tocitem" href="#Concluding-remarks"><span>Concluding remarks</span></a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/antonyorton/PileResponse.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/antonyorton/PileResponse.jl/blob/master/docs/src/tutorial.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="tutorial"><a class="docs-heading-anchor" href="#tutorial">Tutorial</a><a id="tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#tutorial" title="Permalink"></a></h1><pre><code class="nohighlight hljs">Pkg&gt; add &quot;https://github.com/antonyorton/PileResponse.jl&quot;</code></pre><pre><code class="nohighlight hljs">import PileResponse as prs</code></pre><pre><code class="language-julia hljs">push!(LOAD_PATH, &quot;../../src/&quot;) # Line not needed if package is added as above
using PrettyTables
using CairoMakie
CairoMakie.activate!(type=&quot;svg&quot;);</code></pre><ul><li><a href="#tutorial">Tutorial</a></li><li class="no-marker"><ul><li><a href="#CPT-data">CPT data</a></li><li class="no-marker"><ul><li><a href="#Plot-the-CPT-data">Plot the CPT data</a></li></ul></li><li><a href="#Soil-properties-and-depth-to-groundwater">Soil properties and depth to groundwater</a></li><li><a href="#Derive-I_{c},-V_{s}-and-E_{0}">Derive <span>$I_{c}$</span>, <span>$V_{s}$</span> and <span>$E_{0}$</span></a></li><li class="no-marker"><ul><li><a href="#Linear-approximation-to-E_{0}-with-depth">Linear approximation to <span>$E_{0}$</span> with depth</a></li><li><a href="#Plot-the-derived-values-from-the-CPT-data">Plot the derived values from the CPT data</a></li></ul></li><li><a href="#Pile-load-test-details">Pile load test details</a></li><li class="no-marker"><ul><li><a href="#Pile-properties">Pile properties</a></li></ul></li><li><a href="#Pile-ultimate-load-assessment">Pile ultimate load assessment</a></li><li class="no-marker"><ul><li><a href="#Pile-ultimate-shaft-load">Pile ultimate shaft load</a></li><li><a href="#Pile-ultimate-base-load">Pile ultimate base load</a></li><li><a href="#Pile-ultimate-load">Pile ultimate load</a></li></ul></li><li><a href="#Pile-load-displacement-response">Pile load displacement response</a></li><li class="no-marker"><ul><li><a href="#Pile-capacity">Pile capacity</a></li><li><a href="#Load-displacement-curve">Load displacement curve</a></li><li><a href="#Table-of-results">Table of results</a></li></ul></li><li><a href="#Load-carried-by-pile-shaft-at-capacity">Load carried by pile shaft at capacity</a></li><li class="no-marker"><ul><li><a href="#Load-versus-depth-at-pile-capacity">Load versus depth at pile capacity</a></li></ul></li><li><a href="#Concluding-remarks">Concluding remarks</a></li></ul></li></ul><h2 id="CPT-data"><a class="docs-heading-anchor" href="#CPT-data">CPT data</a><a id="CPT-data-1"></a><a class="docs-heading-anchor-permalink" href="#CPT-data" title="Permalink"></a></h2><p>We read CPT data from a text file such as a .csv file. It is a requirement that the file has columns for:</p><ul><li>depth (m)</li><li>qc (MPa)</li><li>fs (kPa)</li><li>u2 (kPa)</li></ul><p>The column names should be sensible or the program will not be able to guess them. We also need to ensure the correct relative path to the file and the correct delimeter, for example comma (&#39;,&#39;) or tab (&#39;\t&#39;).</p><pre><code class="language-julia hljs">data = prs.read_delimited_text_file(&quot;../../data/example_cpt_data.csv&quot;, delim=&#39;,&#39;);</code></pre><p>We extract the column names and assign the data to variables.</p><pre><code class="language-julia hljs">depth_col, qc_col, fs_col, u2_col = prs.find_cpt_column_names(collect(keys(data)));
depth_m = data[depth_col];
qc_MPa = data[qc_col];
fs_MPa = data[fs_col] * 0.001;
u2_MPa = data[u2_col] * 0.001;</code></pre><h3 id="Plot-the-CPT-data"><a class="docs-heading-anchor" href="#Plot-the-CPT-data">Plot the CPT data</a><a id="Plot-the-CPT-data-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-the-CPT-data" title="Permalink"></a></h3><p>Check that the data looks as expected by comparing to pdf reports if available.</p><pre><code class="language-julia hljs">fig1 = Figure(size=(800, 800));
ax1 = Axis(fig1[1, 1], title=&quot;qc (MPa)&quot;, xlabel=&quot;qc (MPa)&quot;, ylabel=&quot;Elevation (m)&quot;, yticks=(-round(depth_m[end] + 1):0));
ax2 = Axis(fig1[1, 2], title=&quot;fs (kPa)&quot;, xlabel=&quot;fs (kPa)&quot;, yticks=(-round(depth_m[end] + 1):0));
ax3 = Axis(fig1[1, 3], title=&quot;u2 (kPa)&quot;, xlabel=&quot;u2 (kPa)&quot;, yticks=(-round(depth_m[end] + 1):0));
lines!(fig1[1, 1], qc_MPa, -depth_m);
lines!(fig1[1, 2], 1000 * fs_MPa, -depth_m);
lines!(fig1[1, 3], 1000 * u2_MPa, -depth_m);</code></pre><p>Note that the code for creating plots will be hidden from now on. For help with plotting using CairoMakie, refer to the docs at <a href="https://docs.makie.org/stable/">https://docs.makie.org/stable/</a>.</p><pre><code class="language-julia hljs">fig1</code></pre><img src="bfe48b26.svg" alt="Example block output"/><h2 id="Soil-properties-and-depth-to-groundwater"><a class="docs-heading-anchor" href="#Soil-properties-and-depth-to-groundwater">Soil properties and depth to groundwater</a><a id="Soil-properties-and-depth-to-groundwater-1"></a><a class="docs-heading-anchor-permalink" href="#Soil-properties-and-depth-to-groundwater" title="Permalink"></a></h2><p>Assign properties which are assumed to be constant over the soil profile. The loss in accuracy from assuming a constant soil unit weight is likely to be acceptable for most situations.</p><p>Soil properties</p><pre><code class="language-julia hljs">gamma_soil = 20.5; #Soil unit weight (kN/m3)
Poisson_ratio = 0.3;</code></pre><p>Groundwater depth</p><pre><code class="language-julia hljs">gw_depth = 3.0; # m below ground</code></pre><h2 id="Derive-I_{c},-V_{s}-and-E_{0}"><a class="docs-heading-anchor" href="#Derive-I_{c},-V_{s}-and-E_{0}">Derive <span>$I_{c}$</span>, <span>$V_{s}$</span> and <span>$E_{0}$</span></a><a id="Derive-I_{c},-V_{s}-and-E_{0}-1"></a><a class="docs-heading-anchor-permalink" href="#Derive-I_{c},-V_{s}-and-E_{0}" title="Permalink"></a></h2><p>From the correlations published by Roberston and Cabal (2022) and the theory of elasticity, we derive:<br/><br/>The soil behaviour type</p><ul><li><span>$\small{I_{c} = \sqrt{(3.47 - log_{10}(Q_{t}))^{2} + (log_{10}(F_{r}) + 1.22)^{2}}}$</span></li></ul><p>The shear wave velocity</p><ul><li><span>$\small{V_{s} = \sqrt{(\alpha_{vs}\cdot \large\frac{q_{n}}{\small{0.101}})}}$</span>, where <span>$\alpha_{vs} = 10^{(0.55 Ic + 1.68)}$</span></li></ul><p>The small strain shear modulus</p><ul><li><span>$\small{G_{0} = \frac{\gamma}{9.81} \cdot V_{s}^2}$</span></li></ul><p>The small strain elastic modulus</p><ul><li><span>$\small{E_{0} = 2(1 + ν)G_{0}}$</span></li></ul><pre><code class="language-julia hljs">Ic = prs.get_Ic(depth_m, qc_MPa, fs_MPa, u2_MPa, gw_depth, gamma=gamma_soil, a=0.73);
Vs = prs.get_Vs(depth_m, qc_MPa, fs_MPa, u2_MPa, gw_depth, gamma=gamma_soil, a=0.73);
E0 = prs.get_E0(Vs, gamma=gamma_soil, ν=Poisson_ratio);</code></pre><h3 id="Linear-approximation-to-E_{0}-with-depth"><a class="docs-heading-anchor" href="#Linear-approximation-to-E_{0}-with-depth">Linear approximation to <span>$E_{0}$</span> with depth</a><a id="Linear-approximation-to-E_{0}-with-depth-1"></a><a class="docs-heading-anchor-permalink" href="#Linear-approximation-to-E_{0}-with-depth" title="Permalink"></a></h3><p>To assess the intial pile head stiffness, we need to model the soil profile as having a linearly increasing elastic modulus with depth. This is a reasonable approximation for many soil profiles.</p><p>We obtain a least squares fit to <span>$E_{0}$</span></p><pre><code class="language-julia hljs">fun_E0_linear = prs.get_least_squares_interpolator(depth_m, E0);</code></pre><h3 id="Plot-the-derived-values-from-the-CPT-data"><a class="docs-heading-anchor" href="#Plot-the-derived-values-from-the-CPT-data">Plot the derived values from the CPT data</a><a id="Plot-the-derived-values-from-the-CPT-data-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-the-derived-values-from-the-CPT-data" title="Permalink"></a></h3><img src="89cdb840.svg" alt="Example block output"/><h2 id="Pile-load-test-details"><a class="docs-heading-anchor" href="#Pile-load-test-details">Pile load test details</a><a id="Pile-load-test-details-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-load-test-details" title="Permalink"></a></h2><p>For this tutorial, we consider a pile load test which was carried out at Mobile, Alabama. The test comprised a 457 mm diameter, 9.5 mm wall, closed-toe, steel-pipe pile driven to 17.0 m below ground and grouted after driving. The pile stick up was approximately 0.9 m above ground.<br/><br/>Further details of the test can be found at the website of the test organiser <a href="https://www.fellenius.net/">www.fellenius.net</a>.</p><h3 id="Pile-properties"><a class="docs-heading-anchor" href="#Pile-properties">Pile properties</a><a id="Pile-properties-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-properties" title="Permalink"></a></h3><p>The available pile types are listed below</p><pre><code class="language-julia hljs">prs.list_available_pile_types()</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">15-element Vector{Any}:
 &quot;Bored pile - dry bored pile&quot;
 &quot;Bored pile - no support&quot;
 &quot;Bored pile - permanent casing&quot;
 &quot;Bored pile - recoverable casing&quot;
 &quot;Bored pile - with slurry&quot;
 &quot;Bored pile - with slurry and grooved sockets&quot;
 &quot;CFA pile&quot;
 &quot;Driven pile - cast in place&quot;
 &quot;Driven pile - concrete coated steel&quot;
 &quot;Driven pile - pre-cast concrete&quot;
 &quot;Driven pile - steel H pile&quot;
 &quot;Driven pile - steel closed ended&quot;
 &quot;Driven pile - steel open ended&quot;
 &quot;Screw pile - cast in place&quot;
 &quot;Screw pile - with casing&quot;</code></pre><p>We assign pile type, pile length and pile diameter</p><pre><code class="language-julia hljs">pile_type = &quot;Driven pile - steel closed ended&quot;;
pile_length = 17.0; # metres
pile_diameter = 0.457; # metres</code></pre><p>The pile elastic modulus, <span>$E_{pile}$</span>, is caculated for a steel shell, grout filled circular pile</p><pre><code class="language-julia hljs">odiam = 0.457;
idiam = 0.457 - 0.0095;
Aouter = pi * odiam^2 / 4;
Ainner = pi * idiam^2 / 4;
Eouter = 200 # GPa;
Einner = 20  # GPa;
Epile_GPa = ((Aouter - Ainner) * Eouter + Ainner * Einner) / Aouter;</code></pre><pre><code class="language-julia hljs">Epile_MPa = round(Int64, 1000 * Epile_GPa);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Epile = 27406 MPa</code></pre><h2 id="Pile-ultimate-load-assessment"><a class="docs-heading-anchor" href="#Pile-ultimate-load-assessment">Pile ultimate load assessment</a><a id="Pile-ultimate-load-assessment-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-ultimate-load-assessment" title="Permalink"></a></h2><p>We calculate the pile ultimate load following the approach of Frank (2017).<br/><br/>The calculation of pile ultimate resistance relies on several factors which require a soil type. Using the assessed <span>$I_{c}$</span> value, the soil types required for the assessment are defined in this notebook as follows:</p><ul><li><span>$I_{c} &gt; 2.60$</span> : Silt and clay (soil type 1).</li><li><span>$2.05 &lt; I_{c} \leq 2.60$</span> : Intermediate soil (soil type 2).</li><li><span>$I_{c} \leq 2.05$</span> : Sand (soil type 3).</li></ul><pre><code class="language-julia hljs">soil_type_CPT2012 = prs.get_soil_type_CPT2012(Ic);</code></pre><h3 id="Pile-ultimate-shaft-load"><a class="docs-heading-anchor" href="#Pile-ultimate-shaft-load">Pile ultimate shaft load</a><a id="Pile-ultimate-shaft-load-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-ultimate-shaft-load" title="Permalink"></a></h3><p>The ultimate shaft resistance for each node along the pile shaft is obtained as follows:</p><ul><li><span>$f_{s} = \alpha\cdot f_{sol}$</span>, with <span>$f_{sol} \leq f_{smax}$</span><br/></li></ul><p>where:</p><ul><li><span>$f_{sol}$</span> is the unfactored shaft resistance dependent on <span>$q_{c}$</span> and soil type.</li><li><span>$\alpha$</span> is a factor dependent on soil type and pile type.<br/></li><li><span>$f_{smax}$</span> is a the limiting shaft resistance dependent on soil type and pile type.</li></ul><p><span>$\alpha$</span> is shown below for [silt and clay, intermediate soils, sands].</p><pre><code class="language-julia hljs">prs.get_alpha_shaft_CPT2012()[pile_type]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element Vector{Float64}:
 0.4
 0.5
 0.85</code></pre><p><span>$f_{sol}$</span> is shown below for sands and clays. Note that for intermediate soils the function <code>get_ultimate_shaft_resistance()</code> linearly interpolates <span>$f_{sol}$</span> between <span>$I_{c} = 2.05$</span> (sands) and <span>$I_{c} = 2.60$</span> (clays).</p><img src="47eac436.svg" alt="Example block output"/><p>We first calculate the ultimate resistance (MPa) for each node along the pile.</p><pre><code class="language-julia hljs">fshaft_MPa = prs.get_ultimate_shaft_resistance(qc_MPa, Ic, pile_type, factor=1.0);</code></pre><p>Then the ultimate shaft load (MN) for the whole pile.</p><pre><code class="language-julia hljs">ult_shaft_MN = prs.get_ultimate_shaft_load(depth_m, fshaft_MPa, pile_diameter, pile_length);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">The ultimate shaft load is 1.444 (MN)</code></pre><h3 id="Pile-ultimate-base-load"><a class="docs-heading-anchor" href="#Pile-ultimate-base-load">Pile ultimate base load</a><a id="Pile-ultimate-base-load-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-ultimate-base-load" title="Permalink"></a></h3><p>The ultimate base load is obtained as follows:<br/><br/>We obtain the ultimate base resistance (MPa):</p><ul><li><span>$f_{b} = k_{c}\cdot q_{ca}$</span><br/></li></ul><p>where:</p><ul><li><span>$k_{c}$</span> is a factor dependent on soil type and pile class.<br/></li><li><span>$q_{ca}$</span> is the equavalent average cone resistance for the soil within 1.5 diameters above and below the pile base.</li></ul><pre><code class="language-julia hljs">qc_avg_base = prs.get_average_qc_at_pile_base(depth_m, qc_MPa, pile_length, pile_diameter, clip_to_30pct=true);</code></pre><pre><code class="language-julia hljs">kc_at_base = prs.get_kc_base_CPT2012()[pile_type][soil_type_CPT2012[argmin(abs.(depth_m .- pile_length))]][1];</code></pre><p>Then caculate the ultimate base load (MN).</p><pre><code class="language-julia hljs">fb_MPa = kc_at_base * qc_avg_base;
ult_base_MN = pi * pile_diameter^2 / 4 * fb_MPa;</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">qc_avg_base = 10.61 MPa
kc_at_base = 0.4
Ultimate base load = 0.696 MN</code></pre><h3 id="Pile-ultimate-load"><a class="docs-heading-anchor" href="#Pile-ultimate-load">Pile ultimate load</a><a id="Pile-ultimate-load-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-ultimate-load" title="Permalink"></a></h3><p>The pile ultimate load is the sum of the ultimate loads for the shaft and the base.</p><pre><code class="language-julia hljs">pile_ult_load = ult_base_MN + ult_shaft_MN</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">The predicted pile ultimate load is 2.14(MPa)</code></pre><h2 id="Pile-load-displacement-response"><a class="docs-heading-anchor" href="#Pile-load-displacement-response">Pile load displacement response</a><a id="Pile-load-displacement-response-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-load-displacement-response" title="Permalink"></a></h2><p>The pile load displacement response is assessed by first calculating an intitial pile head stiffness based on the theory of elasticity. The reduction in pile head stiffness for increasing load is then obtained by scaling down dependent on the ratio of applied load to ultimate load.</p><p>The small strain elastic modulus, <span>$E_{0}$</span>, along the pile shaft is assumed to vary linearly, and the least squares approximation obtained above gives:<br/></p><pre><code class="language-julia hljs">E_L = fun_E0_linear(pile_length)
E_Lon2 = fun_E0_linear(pile_length / 2)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">E₀ at the base of the shaft = 277 MPa
E₀ at the midpoint of the shaft = 202 MPa</code></pre><p>The initial pile head stiffness, <span>$k_{0}$</span>, taking account of pile compressibility, is computed following the closed form elastic solution by Randolph and Wroth (1978) as:</p><pre><code class="language-julia hljs">k0 = prs.get_initial_pile_head_stiffness(pile_length, pile_diameter, Epile_MPa, E_L, E_Lon2, ν=Poisson_ratio)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">k₀ = 623 MN/m</code></pre><p>The load displacement curve is derived following a method proposed by Mayne (2001), based on work by Fahey and Carter (1993), which assumes that the pile head stiffness varies as a function of the load ratio <span>$P/P_{ult}$</span> as:<br/></p><ul><li><span>$k = k_{0} \cdot (1 - (P/P_{ult})^{0.3})$</span></li></ul><p>We specify the pile head loads</p><pre><code class="language-julia hljs">pile_head_loads = 0.01:0.001:0.90*pile_ult_load;</code></pre><p>Then calculate the cumulative displacement at each load</p><pre><code class="language-julia hljs">displacement = prs.get_pile_head_displacement(k0, pile_head_loads, pile_ult_load);</code></pre><h3 id="Pile-capacity"><a class="docs-heading-anchor" href="#Pile-capacity">Pile capacity</a><a id="Pile-capacity-1"></a><a class="docs-heading-anchor-permalink" href="#Pile-capacity" title="Permalink"></a></h3><p>The pile capacity is calculated as the load at which the allowable pile head settlement is reached.</p><p>Specify the allowable pile head settlement (metres)</p><pre><code class="language-julia hljs">allowable_pile_head_settlement_m = 0.06;</code></pre><p>Then calculate the pile capacity</p><pre><code class="language-julia hljs">pile_capacity_MN = pile_head_loads[argmin(abs.(displacement .- allowable_pile_head_settlement_m))];</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">The pile capacity is 1.814 MN
The displacement at capacity is 0.06 m</code></pre><h3 id="Load-displacement-curve"><a class="docs-heading-anchor" href="#Load-displacement-curve">Load displacement curve</a><a id="Load-displacement-curve-1"></a><a class="docs-heading-anchor-permalink" href="#Load-displacement-curve" title="Permalink"></a></h3><img src="6962942f.svg" alt="Example block output"/><h3 id="Table-of-results"><a class="docs-heading-anchor" href="#Table-of-results">Table of results</a><a id="Table-of-results-1"></a><a class="docs-heading-anchor-permalink" href="#Table-of-results" title="Permalink"></a></h3><pre><code class="language-julia hljs"># Prepare data
num_rows = 10
mylen = sum.([pile_head_loads .&lt; pile_capacity_MN])[1]
table_indices = collect(1:round(Int64, mylen / (num_rows)):mylen)
table_indices[end] = mylen
table_data = stack([item[table_indices] for item in [pile_head_loads, displacement]])
# Show table
pretty_table(
    HTML,
    table_data,
    header=[&quot;Load (MN)&quot;, &quot;Displacement (m)&quot;],
    max_num_of_rows=num_rows,
    formatters=ft_printf(&quot;%6.4f&quot;))</code></pre><table>
  <thead>
    <tr class = "header headerLastRow">
      <th style = "text-align: right;">Load (MN)</th>
      <th style = "text-align: right;">Displacement (m)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style = "text-align: right;">0.0100</td>
      <td style = "text-align: right;">0.0000</td>
    </tr>
    <tr>
      <td style = "text-align: right;">0.1900</td>
      <td style = "text-align: right;">0.0006</td>
    </tr>
    <tr>
      <td style = "text-align: right;">0.3700</td>
      <td style = "text-align: right;">0.0014</td>
    </tr>
    <tr>
      <td style = "text-align: right;">0.5500</td>
      <td style = "text-align: right;">0.0026</td>
    </tr>
    <tr>
      <td style = "text-align: right;">0.7300</td>
      <td style = "text-align: right;">0.0042</td>
    </tr>
    <tr>
      <td style = "text-align: right;">0.9100</td>
      <td style = "text-align: right;">0.0065</td>
    </tr>
    <tr>
      <td style = "text-align: right;">1.0900</td>
      <td style = "text-align: right;">0.0095</td>
    </tr>
    <tr>
      <td style = "text-align: right;">1.2700</td>
      <td style = "text-align: right;">0.0141</td>
    </tr>
    <tr>
      <td style = "text-align: right;">1.4500</td>
      <td style = "text-align: right;">0.0211</td>
    </tr>
    <tr>
      <td style = "text-align: right;">1.6300</td>
      <td style = "text-align: right;">0.0333</td>
    </tr>
    <tr>
      <td style = "text-align: right;">1.8130</td>
      <td style = "text-align: right;">0.0598</td>
    </tr>
  </tbody>
</table>
<h2 id="Load-carried-by-pile-shaft-at-capacity"><a class="docs-heading-anchor" href="#Load-carried-by-pile-shaft-at-capacity">Load carried by pile shaft at capacity</a><a id="Load-carried-by-pile-shaft-at-capacity-1"></a><a class="docs-heading-anchor-permalink" href="#Load-carried-by-pile-shaft-at-capacity" title="Permalink"></a></h2><p>We can now view the load carried by the pile with depth.<br/><br/>We set the applied load as the pile capacity</p><pre><code class="language-julia hljs">applied_load = pile_capacity_MN;</code></pre><p>Then calculate the load versus depth</p><pre><code class="language-julia hljs">mydepth, myload = prs.get_load_vs_depth(depth_m, qc_MPa, Ic, applied_load, pile_ult_load, pile_length, pile_diameter, pile_type);</code></pre><h3 id="Load-versus-depth-at-pile-capacity"><a class="docs-heading-anchor" href="#Load-versus-depth-at-pile-capacity">Load versus depth at pile capacity</a><a id="Load-versus-depth-at-pile-capacity-1"></a><a class="docs-heading-anchor-permalink" href="#Load-versus-depth-at-pile-capacity" title="Permalink"></a></h3><img src="96165f4c.svg" alt="Example block output"/><h2 id="Concluding-remarks"><a class="docs-heading-anchor" href="#Concluding-remarks">Concluding remarks</a><a id="Concluding-remarks-1"></a><a class="docs-heading-anchor-permalink" href="#Concluding-remarks" title="Permalink"></a></h2><p>Thank you for following this tutorial.<br/><br/>If you would like to calculate the pile ultimate load or the load-displacement response with a single function, please see the module <code>FastSolve.jl</code> in the GitHub <a href="https://github.com/antonyorton/PileResponse.jl">repository</a>.<br/><br/><em>This tutorial was completed in Sydney, Australia on 23 February 2025.</em></p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../api/">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Saturday 8 March 2025 01:00">Saturday 8 March 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
